/**
 * Contain the logic for a drawer.
 *
 * @copyright  2023 Willian Mano - http://conecti.me
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_modreportproblem/modal",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","local_modreportproblem/repository","local_modreportproblem/sweetalert"],(function($,Notification,CustomEvents,Modal,ModalRegistry,Repository,Swal){var registered=!1,SELECTORS_SAVE_BUTTON='[data-action="save"]',SELECTORS_CANCEL_BUTTON='[data-action="cancel"]',ModalReportProblem=function(root){Modal.call(this,root)};return ModalReportProblem.TYPE="local_modreportproblem-modal",(ModalReportProblem.prototype=Object.create(Modal.prototype)).constructor=ModalReportProblem,ModalReportProblem.prototype.registerEventListeners=function(){Modal.prototype.registerEventListeners.call(this),this.getModal().on(CustomEvents.events.activate,SELECTORS_SAVE_BUTTON,function(){Repository.create(this.getFormData()).then((function(){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Problema reportado com sucesso.<br> Obrigado por nos ajudar a evoluir nossa plataforma."})})).catch(Notification.exception),this.hide(),this.destroy()}.bind(this)),this.getModal().on(CustomEvents.events.activate,SELECTORS_CANCEL_BUTTON,function(){this.hide(),this.destroy()}.bind(this))},ModalReportProblem.prototype.getFormData=function(){return this.getForm().serialize()},ModalReportProblem.prototype.getForm=function(){return this.getBody().find("form")},registered||(ModalRegistry.register(ModalReportProblem.TYPE,ModalReportProblem,"local_modreportproblem/modal"),registered=!0),ModalReportProblem}));

//# sourceMappingURL=modal.min.js.map